import{j as e,B as i,az as A,o as L,r as v,aD as M,D as C,T as P,C as I,_ as b,H as k}from"./index-9aZS2Biy.js";import{C as D}from"./config-global-BiiB0tPS.js";import{u as w}from"./useQuery-z5woN8Ii.js";import{u as Q}from"./useMutation-DsBzWsx7.js";import{r as R,s as T,t as _}from"./index-CBJ24RUQ.js";import{c as B,F as o,d as g,T as n,f as a,S as $,k as H}from"./validation-DvFZnTdr.js";import{M as O}from"./MenuItem-B1VXGGez.js";import{D as K}from"./Divider-QW2c_N3U.js";import"./client-Bn0KUMis.js";function E({initialValues:j,onSubmit:c,id:y,setConfirmDel:f}){var F,p,x,S,m,u,h;const s=B({initialValues:j,enableReinitialize:!0,validationSchema:H,onSubmit:c});return e.jsxs("form",{style:{backgroundColor:"#253A51",borderRadius:5},onSubmit:s.handleSubmit,children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-around",my:2,width:"100%",py:2},children:[e.jsxs(i,{style:{flexFlow:"column"},children:[e.jsxs(o,{children:[e.jsx(g,{sx:{fontSize:"small"},children:"سوال فارسی"}),e.jsx(n,{type:"text",InputLabelProps:{shrink:!0,sx:{right:0,left:"unset",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-5px, 10px) scale(0.75)"},color:"#fff"}},sx:{mb:3,"& .MuiOutlinedInput-notchedOutline":{textAlign:"right",paddingRight:0},"& .MuiInputLabel-root":{position:"relative",transform:"none",padding:0},input:{color:"#ffffff",width:"100%"}},...s.getFieldProps("questionForm")})]}),s.errors.questionForm&&e.jsx(a,{sx:{textAlign:"right",mb:2,color:"red"},children:s.errors.questionForm}),(p=(F=s.values)==null?void 0:F.options)==null?void 0:p.map((d,t)=>e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsxs(o,{sx:{display:"flex"},children:[e.jsx(n,{type:"text",size:"small",sx:{mb:1,input:{color:"#ffffff"}},...s.getFieldProps(`options[${t}]`)}),s.touched.options&&s.errors.options&&Array.isArray(s.errors.options)&&s.errors.options[t]&&e.jsx(i,{sx:{display:"flex",flexFlow:"column"},children:e.jsx(a,{sx:{textAlign:"right",mb:2,color:"red",display:"flex"},children:s.errors.options[t]})})]})},t))]}),e.jsxs(i,{sx:{display:"flex",flexFlow:"column"},children:[e.jsxs(o,{children:[e.jsx(g,{sx:{fontSize:"small"},children:"سوال عربی"}),e.jsx(n,{type:"text",...s.getFieldProps("aQuestionForm"),InputLabelProps:{shrink:!0,sx:{right:0,left:"unset",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-5px, 10px) scale(0.75)"},color:"#fff"}},sx:{mb:3,"& .MuiOutlinedInput-notchedOutline":{textAlign:"right",paddingRight:0},"& .MuiInputLabel-root":{position:"relative",transform:"none",padding:0},input:{color:"#ffffff"}}})]}),s.errors.aQuestionForm&&e.jsx(a,{sx:{textAlign:"right",mb:2,color:"red"},children:s.errors.aQuestionForm}),(S=(x=s.values)==null?void 0:x.aOptions)==null?void 0:S.map((d,t)=>e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsxs(o,{sx:{display:"flex"},children:[e.jsx(n,{type:"text",...s.getFieldProps(`aOptions[${t}]`),size:"small",sx:{mb:1,input:{color:"#ffffff"}}}),s.touched.aOptions&&s.errors.aOptions&&Array.isArray(s.errors.aOptions)&&s.errors.aOptions[t]&&e.jsx(i,{sx:{display:"flex",flexFlow:"column"},children:e.jsx(a,{sx:{textAlign:"right",mb:2,color:"red",display:"flex"},children:s.errors.aOptions[t]})})]})},t))]}),e.jsxs(i,{sx:{display:"flex",flexFlow:"column"},children:[e.jsxs(o,{children:[e.jsx(g,{sx:{fontSize:"small"},children:"سوال انگلیسی"}),e.jsx(n,{type:"text",...s.getFieldProps("eQuestionForm"),InputLabelProps:{shrink:!0,sx:{right:0,left:"unset",transformOrigin:"right","&.MuiInputLabel-shrink":{transform:"translate(-5px, 10px) scale(0.75)"},color:"#fff"}},sx:{mb:3,"& .MuiOutlinedInput-notchedOutline":{textAlign:"right",paddingRight:0},"& .MuiInputLabel-root":{position:"relative",transform:"none",padding:0},input:{color:"#ffffff"}}})]}),s.errors.questionForm&&e.jsx(a,{sx:{textAlign:"right",mb:2,color:"red"},children:s.errors.questionForm}),(u=(m=s.values)==null?void 0:m.eOptions)==null?void 0:u.map((d,t)=>e.jsx(i,{sx:{display:"flex",alignItems:"center"},children:e.jsxs(o,{sx:{display:"flex"},children:[e.jsx(n,{type:"text",...s.getFieldProps(`eOptions[${t}]`),size:"small",sx:{mb:1,input:{color:"#ffffff"}}}),s.touched.eOptions&&s.errors.eOptions&&Array.isArray(s.errors.eOptions)&&s.errors.eOptions[t]&&e.jsx(i,{sx:{display:"flex",flexFlow:"column"},children:e.jsx(a,{sx:{textAlign:"right",mb:2,color:"red",display:"flex"},children:s.errors.eOptions[t]})})]})},t))]})]}),e.jsxs(i,{sx:{display:"flex",mt:2,gap:2,mx:6},children:[e.jsxs(o,{fullWidth:!0,sx:{flex:1},children:[e.jsx(g,{id:"demo-simple-select-label",sx:{fontSize:12},children:"گزینه صحیح"}),e.jsxs($,{labelId:"demo-simple-select-label",id:"demo-simple-select",size:"small",value:(h=s.values.trueOption)==null?void 0:h.toString(),onChange:d=>{const t=d.target.value;s.setFieldValue("trueOption",+t)},sx:{color:"#ffffff"},children:[e.jsx(O,{value:1,children:"گزینه اول"}),e.jsx(O,{value:2,children:"گزینه دوم"}),e.jsx(O,{value:3,children:"گزینه سوم"}),e.jsx(O,{value:4,children:"گزینه چهارم"})]})]}),e.jsxs(o,{sx:{display:"flex",flex:1},children:[e.jsx(g,{sx:{fontSize:"14px"},children:"زمان (ثانیه)"}),e.jsx(n,{type:"number",size:"small",sx:{mb:1,input:{color:"#ffffff"}},...s.getFieldProps("time")}),s.errors.time&&e.jsx(a,{sx:{textAlign:"right",mb:2,color:"red"},children:s.errors.time})]})]}),e.jsxs(i,{sx:{display:"flex",gap:2,mx:2},children:[e.jsx(A,{variant:"contained",color:"warning",type:"submit",sx:{my:2,mr:4},children:"به روزرسانی"}),e.jsx(L,{variant:"contained",color:"error",sx:{my:2},onClick:()=>f(y),children:"حذف"})]})]})}function N(){var t,z;const[j,c]=v.useState(""),[y,f]=v.useState(""),[s,F]=v.useState({}),p=M(),{data:x,isLoading:S,refetch:m}=w({queryKey:["getQuizeSpecific"],queryFn:()=>_(p==null?void 0:p.state)}),u=Q({mutationKey:["deleteQuestion"],mutationFn:()=>R(j),onSuccess:r=>{var l;(l=r==null?void 0:r.data)!=null&&l.success?(b.success("سوال با موفقیت حذف شد",{position:"top-left"}),m()):b.error("سوال حذف نشد ، لطفا دوباره امتحان کنید",{position:"top-left"}),c("")}}),h=Q({mutationKey:["updateQuize"],mutationFn:r=>T(r,y),onSuccess:r=>{var l;(l=r==null?void 0:r.data)!=null&&l.success?(b.success("سوال با موفقیت به روزرسانی شد",{position:"top-left"}),m()):b.error("سوال به روزرسانی نشد ، لطفا دوباره امتحان کنید",{position:"top-left"}),f("")}}),d=(r,l)=>{f(l),F(r)};return e.jsxs(C,{children:[e.jsx(P,{variant:"h4",children:"سوالات"}),e.jsx(K,{sx:{my:3}}),e.jsx(i,{children:(z=(t=x==null?void 0:x.data)==null?void 0:t.data)==null?void 0:z.map(r=>e.jsx("div",{children:e.jsx(E,{initialValues:{questionForm:(r==null?void 0:r.questionForm)||"",aQuestionForm:(r==null?void 0:r.aQuestionForm)||"",eQuestionForm:(r==null?void 0:r.aQuestionForm)||"",options:(r==null?void 0:r.options)||["","","",""],aOptions:(r==null?void 0:r.aOptions)||["","","",""],eOptions:(r==null?void 0:r.eOptions)||["","","",""],trueOption:(r==null?void 0:r.trueOption)||1,time:(r==null?void 0:r.time)||15},id:r==null?void 0:r._id,onSubmit:l=>d(l,r==null?void 0:r._id),setConfirmDel:c})},r==null?void 0:r._id))}),e.jsx(I,{title:"حذف سوال",description:"آیا میخواهید این سوال را حذف کنید؟",handleClose:()=>c(""),isLoading:u.isPending,onSubmit:()=>u.mutate(),open:!!j}),e.jsx(I,{title:"به روزرسانی سوال",description:"آیا میخواهید این سوال را به روزرسانی کنید؟",handleClose:()=>f(""),isLoading:h.isPending,onSubmit:()=>h.mutate(s),open:!!y})]})}function ee(){return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsxs("title",{children:[" ",`سوالات - ${D.appName}`]})}),e.jsx(N,{})]})}export{ee as default};
