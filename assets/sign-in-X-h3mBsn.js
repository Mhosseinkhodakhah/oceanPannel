import{aE as g,n as x,_ as a,r as p,j as e,B as m,aF as h,az as b,H as I}from"./index-9aZS2Biy.js";import{C as j}from"./config-global-BiiB0tPS.js";import{I as k}from"./flag-icon-ChWWaGb0.js";import{c as w,l as F,T as d}from"./validation-DvFZnTdr.js";import{u as S}from"./useMutation-DsBzWsx7.js";import{c as y}from"./client-Bn0KUMis.js";import{I as L}from"./InputAdornment-DvH_qKZY.js";const M=async t=>{try{const o=await y().post("set-admin/app/login",t);return console.log("rrr",o),o}catch(o){return console.log(o),o}},P=new g,v=()=>{const t=x(),o=S({mutationFn:M,onSuccess:r=>{var s,i,f,u,c;if((s=r==null?void 0:r.data)!=null&&s.success){const l=new Date;l.setDate(l.getDate()+7),P.set("ocean-token",(f=(i=r==null?void 0:r.data)==null?void 0:i.data)==null?void 0:f.token,{expires:l,path:"/",secure:!0}),t("/")}else a.error((c=(u=r==null?void 0:r.response)==null?void 0:u.data)==null?void 0:c.error)}});return{formik:w({initialValues:{userName:"",password:""},validationSchema:F,onSubmit:r=>{o.mutate(r)}}),loginMutation:o}},C="/assets/logomain-Ctvvti4t.png";function N(){const{formik:t,loginMutation:o}=v(),[n,r]=p.useState(!1),s=p.useCallback(()=>{t.errors.userName&&a.error(t.errors.userName),t.errors.password&&a.error(t.errors.password)},[t.errors]),i=e.jsx(m,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsxs("form",{onSubmit:t.handleSubmit,children:[e.jsx(d,{fullWidth:!0,label:"نام کاربری",InputLabelProps:{shrink:!0,sx:{right:0,left:"unset",transformOrigin:"right","&.MuiInputLabel-shrink":{color:"#ffffff",transform:"translate(-7px, 10px) scale(0.7)"}}},sx:{mb:3,"& .MuiOutlinedInput-notchedOutline":{border:"1px solid #ffffff",textAlign:"right",paddingRight:0},"& .MuiInputLabel-root":{position:"relative",transform:"none",padding:0},input:{color:"#ffffff"}},...t.getFieldProps("userName")}),e.jsx(d,{fullWidth:!0,label:"رمز عبور",type:n?"text":"password",InputLabelProps:{shrink:!0,sx:{right:0,left:"unset",transformOrigin:"right","&.MuiInputLabel-shrink":{color:"#ffffff",transform:"translate(-7px, 10px) scale(0.8)"}}},InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(h,{onClick:()=>r(!n),edge:"end",children:e.jsx(k,{color:"#ffffff",icon:n?"solar:eye-bold":"solar:eye-closed-bold"})})})},sx:{mb:3,"& .MuiOutlinedInput-notchedOutline":{textAlign:"right",paddingRight:0,border:"1px solid #ffffff"},"& .MuiInputLabel-root":{position:"relative",transform:"none",padding:0},input:{color:"#ffffff"}},...t.getFieldProps("password")}),e.jsx(b,{fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"contained",onClick:s,loading:o.isPending,children:"ورود"})]})});return e.jsxs(e.Fragment,{children:[e.jsx(m,{gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",sx:{mb:5},children:e.jsx("img",{alt:"",src:C,width:"100%",height:100})}),i]})}function z(){return e.jsxs(e.Fragment,{children:[e.jsx(I,{children:e.jsxs("title",{children:[" ",`ورود - ${j.appName}`]})}),e.jsx(N,{})]})}export{z as default};
