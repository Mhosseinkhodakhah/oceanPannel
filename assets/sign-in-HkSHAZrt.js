import{aG as d,n as g,_ as a,r as c,j as e,B as p,aH as x,az as h,H as b}from"./index-CWfFKzvx.js";import{C as I}from"./config-global-BiiB0tPS.js";import{I as j}from"./flag-icon-CBGz4LY2.js";import{c as w,l as k,T as m}from"./validation-DV3NPfJM.js";import{u as S}from"./useMutation-DuokxTVT.js";import{c as y}from"./client-DRsTmFvH.js";import{I as F}from"./InputAdornment-Ca3MR2nE.js";const L=async o=>{try{const t=await y().post("set-admin/app/login",o);return console.log("rrr",t),t}catch(t){return console.log(t),t}},M=new d,P=()=>{g();const o=S({mutationFn:L,onSuccess:r=>{var n,s,i,f,u;if((n=r==null?void 0:r.data)!=null&&n.success){const l=new Date;l.setDate(l.getDate()+7),M.set("ocean-token",(i=(s=r==null?void 0:r.data)==null?void 0:s.data)==null?void 0:i.token,{expires:l,path:"/",secure:!0}),window.location.replace("/")}else a.error((u=(f=r==null?void 0:r.response)==null?void 0:f.data)==null?void 0:u.error)}});return{formik:w({initialValues:{userName:"",password:""},validationSchema:k,onSubmit:r=>{o.mutate(r)}}),loginMutation:o}},v="/assets/logomain-Ctvvti4t.png";function C(){const{formik:o,loginMutation:t}=P(),[r,n]=c.useState(!1),s=c.useCallback(()=>{o.errors.userName&&a.error(o.errors.userName),o.errors.password&&a.error(o.errors.password)},[o.errors]),i=e.jsx(p,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:e.jsxs("form",{onSubmit:o.handleSubmit,children:[e.jsx(m,{fullWidth:!0,label:"نام کاربری",InputLabelProps:{shrink:!0,sx:{right:0,left:"unset",transformOrigin:"right","&.MuiInputLabel-shrink":{color:"#ffffff",transform:"translate(-7px, 10px) scale(0.7)"}}},sx:{mb:3,"& .MuiOutlinedInput-notchedOutline":{border:"1px solid #ffffff",textAlign:"right",paddingRight:0},"& .MuiInputLabel-root":{position:"relative",transform:"none",padding:0},input:{color:"#ffffff"}},...o.getFieldProps("userName")}),e.jsx(m,{fullWidth:!0,label:"رمز عبور",type:r?"text":"password",InputLabelProps:{shrink:!0,sx:{right:0,left:"unset",transformOrigin:"right","&.MuiInputLabel-shrink":{color:"#ffffff",transform:"translate(-7px, 10px) scale(0.8)"}}},InputProps:{endAdornment:e.jsx(F,{position:"end",children:e.jsx(x,{onClick:()=>n(!r),edge:"end",children:e.jsx(j,{color:"#ffffff",icon:r?"solar:eye-bold":"solar:eye-closed-bold"})})})},sx:{mb:3,"& .MuiOutlinedInput-notchedOutline":{textAlign:"right",paddingRight:0,border:"1px solid #ffffff"},"& .MuiInputLabel-root":{position:"relative",transform:"none",padding:0},input:{color:"#ffffff"}},...o.getFieldProps("password")}),e.jsx(h,{fullWidth:!0,size:"large",type:"submit",color:"inherit",variant:"contained",onClick:s,loading:t.isPending,children:"ورود"})]})});return e.jsxs(e.Fragment,{children:[e.jsx(p,{gap:1.5,display:"flex",flexDirection:"column",alignItems:"center",sx:{mb:5},children:e.jsx("img",{alt:"",src:v,width:"100%",height:100})}),i]})}function W(){return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsxs("title",{children:[" ",`ورود - ${I.appName}`]})}),e.jsx(C,{})]})}export{W as default};
