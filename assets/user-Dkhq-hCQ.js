import{r as i,j as t,o as g,L as y,D as j,T as C,B as N,C as p,_ as c,H as v}from"./index-DdmGNYTu.js";import{C as D}from"./config-global-BiiB0tPS.js";import{u as A}from"./useQuery-CUHW0WWp.js";import{u as w}from"./useMutation-DmbTThdZ.js";import{A as R,a as b}from"./index.esm-Cvlo3cgR.js";import{c as u}from"./client-Osamek89.js";import{A as I}from"./Avatar-D23Yme-j.js";const L=async()=>{try{const{data:s}=await u().get("/get-user/get-all-users");return s}catch(s){return console.log(s),s}},O=async s=>{try{const{data:o}=await u().put(`/set-user/block-user/${s}`);return o}catch(o){return console.log(o),o}},S=b;function _(){const[s,o]=i.useState(!1),[d,f]=i.useState(""),r=()=>o(!1),{data:n,isLoading:h,refetch:m}=A({queryKey:["getUsers"],queryFn:L}),[x,G]=i.useState([{field:"profile",headerName:"پروفایل",cellRenderer:e=>t.jsx(I,{alt:"",src:e==null?void 0:e.value,sx:{width:35,height:35}})},{field:"userName",headerName:"نام کاربری"},{field:"email",headerName:"ایمیل"},{field:"fullName",headerName:"نام و نام خانوادگی"},{field:"country",headerName:"کشور"},{field:"school",headerName:"مدرسه"},{field:"isBlocked",headerName:"عملیات",cellRenderer:e=>t.jsx(g,{variant:"contained",color:e!=null&&e.value?"success":"error",sx:{width:"max-content",height:24,mt:1},onClick:()=>{var a;o(!0),f((a=e==null?void 0:e.data)==null?void 0:a._id)},children:e!=null&&e.value?"فعال کردن":"غیر فعال کردن"})}]),l=w({mutationFn:O,mutationKey:["activeDeActiveUsers"],onSuccess:e=>{e.success?(r(),c.success("عملیات با موفیت انجام شد",{position:"top-left"}),m()):(r(),c.error("عملیات انجام نشد ، لطفا دوباره امتحان کنید",{position:"top-left"}))}});return h?t.jsx(y,{}):t.jsxs(j,{children:[t.jsx(C,{variant:"h4",flexGrow:1,sx:{mb:4},children:"کاربران"}),t.jsx(N,{className:"ag-theme-quartz-dark",style:{height:500},children:t.jsx(R,{rowData:(n==null?void 0:n.data)||[],columnDefs:x,gridOptions:{localeText:S},defaultColDef:{filter:!0,sortable:!0,cellStyle:{display:"flex",justifyContent:"center"}},enableRtl:!0,pagination:!0})}),t.jsx(p,{open:s,handleClose:r,title:"عملیات کاربر",description:"آیا میخواهید کاربر را فعال/غیرفعال کنید؟",isLoading:l.isPending,onSubmit:()=>l.mutate(d)})]})}function H(){return t.jsxs(t.Fragment,{children:[t.jsx(v,{children:t.jsxs("title",{children:[" ",`کاربران - ${D.appName}`]})}),t.jsx(_,{})]})}export{H as default};
